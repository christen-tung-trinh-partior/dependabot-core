#!/bin/bash

echo "=> building dockerfile"
docker build -t dependabot/dependabot-core-development -f Dockerfile.development .

echo "=> running docker development shell"
docker run --rm -ti \
  -v "$(pwd)/Gemfile:/code/Gemfile" \
  -v "$(pwd)/Gemfile.lock:/code/Gemfile.lock" \
  -v "$(pwd)/dependabot-core.gemspec:/code/dependabot-core.gemspec" \
  -v "$(pwd)/bin:/code/bin" \
  -v "$(pwd)/lib:/code/lib" \
  -v "$(pwd)/spec:/code/spec" \
  -v "$(pwd)/helpers:/code/helpers" \
  --cap-add=SYS_PTRACE \
  dependabot/dependabot-core-development bash
